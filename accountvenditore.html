<!DOCTYPE html>
<html>
<head>
<LINK href="stilecompro.css"  rel=stylesheet>
<script language='javascript'>
var mailutente=sessionStorage.getItem('mailutente');
var mailutenteobj=JSON.parse(mailutente);//ottengo email da sessionstorage
var venditori=localStorage.getItem('venditori');
var venditoriobj=JSON.parse(venditori);//scarico array venditori
function vaihome(){
window.location.href="compro.html";
}
function impostadati(){
for(i=0;(i<venditoriobj.length);i++){ //cerco nell'array la email con cui ho loggato 
if((venditoriobj[i].email==mailutenteobj))
 {
document.getElementById("nome").innerHTML="<strong>Il tuo nome: </strong>"+venditoriobj[i].nome;
document.getElementById("cognome").innerHTML="<strong>Il tuo cognome: </strong>"+venditoriobj[i].cognome;
document.getElementById("nascita").innerHTML="<strong>Data di nascita: </strong>"+venditoriobj[i].nascita;
document.getElementById("email").innerHTML="<strong>Email: </strong>"+venditoriobj[i].email;
document.getElementById("password").innerHTML="<strong>Password: </strong>"+venditoriobj[i].password;

document.getElementById("piva").innerHTML="<strong>La tua partita iva: </strong>"+venditoriobj[i].piva;
document.getElementById("telefono").innerHTML="<strong>Il tuo telefono: </strong>"+venditoriobj[i].telefono;
document.getElementById("attivit").innerHTML="<strong>Tipo di attivita': </strong>"+venditoriobj[i].attivit;
document.getElementById("urlsito").innerHTML="<strong>Sito: </strong>"+venditoriobj[i].urlsito;

j=i;
 }
}
}

function modifica(x){
 o=x;
if(document.getElementById("pannello").style.visibility=='visible'){
document.getElementById("pannello").style.visibility='hidden';
}
else{
document.getElementById("pannello").style.visibility='visible';
document.getElementById("valore").innerHTML=" '"+o;
}
}

function fatto(){

var cambio=document.getElementById('frmvariabile').value;
var venditore=venditoriobj[j];
if(cambio==""){}else{
sessionStorage.setItem("cognome",JSON.stringify(venditore.cognome));
sessionStorage.setItem("email",JSON.stringify(venditore.email));
sessionStorage.setItem("nascita",JSON.stringify(venditore.nascita));
sessionStorage.setItem("nome",JSON.stringify(venditore.nome));
sessionStorage.setItem("password",JSON.stringify(venditore.password));

sessionStorage.setItem("piva",JSON.stringify(venditore.piva));
sessionStorage.setItem("telefono",JSON.stringify(venditore.telefono));
sessionStorage.setItem("attivit",JSON.stringify(venditore.attivit));
sessionStorage.setItem("urlsito",JSON.stringify(venditore.urlsito));

sessionStorage.setItem(o,JSON.stringify(cambio));

venditore.cognome=JSON.parse(sessionStorage.getItem("cognome"));
venditore.email=JSON.parse(sessionStorage.getItem("email"));
venditore.nascita=JSON.parse(sessionStorage.getItem("nascita"));
venditore.nome=JSON.parse(sessionStorage.getItem("nome"));
venditore.pagamentoprefe=JSON.parse(sessionStorage.getItem("pagamentoprefe"));
venditore.password=JSON.parse(sessionStorage.getItem("password"));
venditore.spam=JSON.parse(sessionStorage.getItem("spam"));
venditoriobj[j]=venditore;
localStorage.setItem('venditori',JSON.stringify(venditoriobj));
vaihome();}
}
function esci(){
sessionStorage.clear();
alert("Arrivederci!");
window.location.href="compro.html";
}
function eliminaaccount(){
//var cliente={'nome':null,'cognome':null,'nascita':null,'email':null,'password':null,'pagamentoprefe':null,'spam':null};
//clientiobj[j]=cliente;
venditoriobj.splice(j,1);
localStorage.setItem('venditori',JSON.stringify(venditoriobj));
esci();
}


</script>

</head>
<body onload='impostadati()'>

		 <div id="header">
		 <a  class='pulsante' href="compro.html"><div  id='home' >HOME</div></a>
         </div>
	   
	   <div class='loginform' id='pannello' >
	   <strong>Cambia:</strong><span id='valore'></span>' </br>
	   <span id='formvariabile'><input type='text' name='frmvariabile' id='frmvariabile' ></span></br>
	   <button class='spazio2' onclick='fatto()'>Fatto</button><button class='spazio2' onclick='modifica()'>Chiudi</button>
	   </div>
	   
	   <div class='loginform'>
		  <div class='titolo'><strong>Il mio account</strong></div> </br>
		   
		  <div id='nome' > </div><button class='spazio' onclick='modifica("nome")'>Modifica</button>
		  <p>
		  <div id='cognome'   ></div><div><button class='spazio' onclick='modifica("cognome")'>Modifica</button></div>
		  <p>
		  <div id='nascita' ></div><div><button class='spazio' onclick='modifica("nascita")'>Modifica</button></div>
		  <p>
		  <div id='email' ></div><div><button class='spazio' onclick='modifica("email")'>Modifica</button></div>
		  <p>
		  <div id='password'  ></div><div><button class='spazio' onclick='modifica("password")'>Modifica</button></div>
		  <p>
		  
		  <div id='piva'   ></div><div><button class='spazio' onclick='modifica("piva")'>Modifica</button></div>
		  <p>
		  <div id='telefono' ></div><div><button class='spazio' onclick='modifica("telefono")'>Modifica</button></div>
		  <p>
		  <div id='attivit' ></div><div><button class='spazio' onclick='modifica("attivit")'>Modifica</button></div>
		  <p>
		  <div id='urlsito'  ></div><div><button class='spazio' onclick='modifica("urlsito")'>Modifica</button></div>
		  <p>
		  
		 <div><strong><a onclick='esci()'>Esci</a>
		  <a id='eliacc'onclick='eliminaaccount()'>Elimina Account</a></strong>
		  </div>
	   </div>
</body>
</html>